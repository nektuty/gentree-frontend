{"version":3,"sources":["redux/dialogsReducer.js","util/objectHelper.js","redux/usersReducer.js","assets/images/logo.jpg","components/login/Login.module.css","components/login/loginForm/LoginForm.module.css","components/shared/preloader/Preloader.module.css","assets/images/spinner.svg","api/api.js","components/header/Header.module.css","components/navbar/Navbar.module.css","serviceWorker.js","components/navbar/Navbar.jsx","components/header/Header.jsx","redux/authReducer.js","components/header/HeaderContainer.jsx","components/login/loginForm/LoginForm.jsx","components/login/Login.jsx","redux/appReducer.js","redux/sidebarReducer.js","redux/store.js","hoc/withSuspense.jsx","App.js","util/iconUtils.js","index.js","components/shared/form-controls/Controls.jsx","util/validators/validators.js","components/shared/form-controls/Controls.module.css","components/shared/preloader/preloader.jsx","redux/profileReducer.js"],"names":["SEND_MESSAGE","ACTION_PREFIX","initialState","dialogs","id","name","messages","message","dialogsReducer","state","action","type","text","sendMessage","updateItemPropertyInArray","array","itemId","propName","propValue","map","obj","SET_USERS","ADD_USERS","TOGGLE_FOLLOW","users","pageSize","totalUsersCount","currentPage","isFetching","followingInProgress","usersReducer","userId","followed","usersCount","inProgress","filter","toggleFollowSuccess","setIsFetching","toggleFollowingInProgress","fetchUsers","page","dispatch","a","userAPI","getUsers","data","items","totalCount","toggleFollow","follow","unfollow","resultCode","module","exports","ax","axios","create","baseURL","withCredentials","get","then","response","post","delete","profileAPI","getProfile","getStatus","updateStatus","status","put","authAPI","authMe","console","log","login","username","password","rememberMe","encodeURIComponent","headers","logout","Boolean","window","location","hostname","match","Navbar","className","css","navbar","item","icon","to","activeClassName","active","Header","props","src","logo","alt","isAuth","href","onClick","SET_USER_DATA","email","setAuthUserData","getAuthUserData","mapDispatchToProps","connect","auth","maxLengthUsername","maxLen","maxLengthPassword","LoginForm","reduxForm","form","error","handleSubmit","createField","TextInput","requiredField","onSubmit","formError","disabled","catch","err","exception","stopSubmit","_error","values","initialized","reducers","combineReducers","app","profileReducer","sidebarReducer","formReducer","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunk","withSuspense","Component","fallback","ProfileContainer","React","lazy","DialogsContainer","UsersContainer","library","add","fab","fas","far","App","this","initializeApp","path","render","userData","Promise","all","AppContainer","withRouter","GenTreeApp","ReactDOM","document","getElementById","navigator","serviceWorker","ready","registration","unregister","TextArea","input","meta","touched","warning","hasError","formControl","component","placeholder","validate","value","max","length","Preloader","spinner","ADD_POST","DELETE_POST","SET_USER_PROFILE","SET_USER_STATUS","posts","likeCount","profile","postId","addPost","setUserStatus","getUserProfile","getUserStatus","updateUserStatus"],"mappings":"iMACMA,EAAeC,+BAEfC,EAAe,CACjBC,QAAS,CACL,CAACC,GAAI,EAAGC,KAAM,QACd,CAACD,GAAI,EAAGC,KAAM,QACd,CAACD,GAAI,EAAGC,KAAM,UACd,CAACD,GAAI,EAAGC,KAAM,SAElBC,SAAU,CACN,CAACF,GAAI,EAAGG,QAAS,MACjB,CAACH,GAAI,EAAGG,QAAS,gBACjB,CAACH,GAAI,EAAGG,QAAS,MACjB,CAACH,GAAI,EAAGG,QAAS,aACjB,CAACH,GAAI,EAAGG,QAAS,QAIZC,EAAiB,WAAmC,IAAlCC,EAAiC,uDAAzBP,EAAcQ,EAAW,uCAC5D,OAAQA,EAAOC,MACX,KAAKX,EACD,IAAIO,EAAU,CAACH,GAAI,EAAGG,QAASG,EAAOE,MACtC,OAAO,eACAH,EADP,CAEIH,SAAS,GAAD,mBAAMG,EAAMH,UAAZ,CAAsBC,MAGtC,QACI,OAAOE,IAINI,EAAc,SAACD,GAAD,MAAW,CAACD,KAAMX,EAAcY,U,kMCvBhDE,EAA4B,SAACC,EAAOC,EAAQC,EAAUC,GAC7D,OAAOH,EAAMI,KAAI,SAAAC,GACb,OAAIA,EAAIhB,KAAOY,EACJI,EAEJ,eACAA,EADP,eAEKH,EAAWC,QCblBG,EAAYpB,0BACZqB,EAAYrB,0BACZsB,EAAgBtB,8BAMhBC,EAAe,CACjBsB,MAAO,GACPC,SAAU,EACVC,gBAAiB,EACjBC,YAAa,EACbC,YAAY,EACZC,oBAAqB,IAGZC,EAAe,WAAmC,IAAlCrB,EAAiC,uDAAzBP,EAAcQ,EAAW,uCAC1D,OAAQA,EAAOC,MACX,KAAKU,EACD,OAAO,eACAZ,EADP,CAEIe,MAAM,YAAKd,EAAOc,SAE1B,KAAKF,EACD,OAAO,eACAb,EADP,CAEIe,MAAM,GAAD,mBAAMf,EAAMe,OAAZ,YAAsBd,EAAOc,UAE1C,KAAKD,EACD,OAAO,eACAd,EADP,CAEIe,MAAOV,EAA0BL,EAAMe,MAAOd,EAAOqB,OAAQ,WAAYrB,EAAOsB,YAExF,IA/BiB/B,iCAgCb,OAAO,eACAQ,EADP,CAEIkB,YAAajB,EAAOiB,cAE5B,IAnCsB1B,sCAoClB,OAAO,eACAQ,EADP,CAEIiB,gBAAiBhB,EAAOuB,aAEhC,IAvCgBhC,gCAwCZ,OAAO,eACAQ,EADP,CAEImB,WAAYlB,EAAOkB,aAE3B,IA3C6B3B,6CA4CzB,OAAO,eACAQ,EADP,CAEIoB,oBAAqBnB,EAAOwB,WAAP,sBACXzB,EAAMoB,qBADK,CACgBnB,EAAOqB,SACtCtB,EAAMoB,oBAAoBM,QAAO,SAAA/B,GAAE,OAAIM,EAAOqB,SAAW3B,OAEvE,QACI,OAAOK,IAQN2B,EAAsB,SAACL,EAAQC,GAAT,MAAuB,CAACrB,KAAMY,EAAeQ,SAAQC,aAG3EK,EAAgB,SAACT,GAAD,MAAiB,CAACjB,KA/DvBV,gCA+D8C2B,eACzDU,EAA4B,SAACJ,EAAYH,GAAb,MAAyB,CAC9DpB,KAhEiCV,6CAiEjCiC,aACAH,WAKSQ,EAAa,SAACC,EAAMf,GAC7B,8CAAO,WAAOgB,GAAP,eAAAC,EAAA,6DACHD,EAASJ,GAAc,IADpB,SAEgBM,IAAQC,SAASJ,EAAMf,GAFvC,OAEGoB,EAFH,OAGHJ,EAfwC,CAAC9B,KA/DxBV,iCA+DgD0B,YAezCa,IACxBC,EAASJ,GAAc,IACvBI,GApBiBjB,EAoBCqB,EAAKC,MApBK,CAACnC,KAAMU,EAAWG,WAqB9CiB,EAjB2C,CAAC9B,KA/DtBV,sCA+DmDgC,WAiB7CY,EAAKE,aAN9B,iCAXuB,IAJTvB,IAed,OAAP,uDAUSwB,EAAe,SAACjB,EAAQkB,GACjC,8CAAO,WAAOR,GAAP,SAAAC,EAAA,yDACHD,EAASH,GAA0B,EAAMP,KAC5BkB,EAFV,gCAGSN,IAAQM,OAAOlB,GAHxB,0DAISY,IAAQO,SAASnB,GAJ1B,2BAKqB,IALrB,KAKMoB,YACLV,EAASL,EAAoBL,EAAQkB,IAEzCR,EAASH,GAA0B,EAAOP,IARvC,4CAAP,wD,kBC7FJqB,EAAOC,QAAU,mzJ,oBCCjBD,EAAOC,QAAU,CAAC,KAAO,sB,oBCAzBD,EAAOC,QAAU,CAAC,UAAY,+B,oBCA9BD,EAAOC,QAAU,CAAC,QAAU,6B,oBCD5BD,EAAOC,QAAU,IAA0B,qC,gCCA3C,mHAQMC,EARN,OAQWC,EAAMC,OAAO,CACpBC,QAPY,yBAQZC,iBAAiB,IAiBRf,EAAU,CACnBC,SADmB,WACuB,IAAjCjB,EAAgC,uDAAlB,EAAGF,EAAe,uDAAJ,GACjC,OAAO6B,EAAGK,IAAH,qBAAqBhC,EAArB,kBAA0CF,IAC5CmC,MAAK,SAAAC,GAAQ,OAAIA,EAAShB,SAGnCI,OANmB,SAMZlB,GACH,OAAOuB,EAAGQ,KAAH,iBAAkB/B,IACpB6B,MAAK,SAAAC,GAAQ,OAAIA,EAAShB,SAGnCK,SAXmB,SAWVnB,GACL,OAAOuB,EAAGS,OAAH,iBAAoBhC,IACtB6B,MAAK,SAAAC,GAAQ,OAAIA,EAAShB,UAI1BmB,EAAa,CACtBC,WADsB,SACXlC,GACP,OAAOuB,EAAGK,IAAH,kBAAkB5B,IACpB6B,MAAK,SAAAC,GAAQ,OAAIA,EAAShB,SAEnCqB,UALsB,SAKZnC,GACN,OAAOuB,EAAGK,IAAH,yBAAyB5B,IAC3B6B,MAAK,SAAAC,GAAQ,OAAIA,EAAShB,SAEnCsB,aATsB,SASTC,GACT,OAAOd,EAAGe,IAAH,iBAAyB,CAC5BD,WAECR,MAAK,SAAAC,GAAQ,OAAIA,EAAShB,UAI1ByB,EAAU,CACnBC,OADmB,WAGf,OADAC,QAAQC,IAAR,mBACOnB,EAAGK,IAAH,WACFC,MAAK,SAAAC,GAAQ,OAAIA,EAAShB,SAEnC6B,MANmB,SAMbC,EAAUC,GAA+B,IAArBC,EAAoB,wDACpChC,EAAI,mBAAeiC,mBAAmBH,GAAlC,qBAAwDG,mBAAmBF,GAA3E,wBAAoGC,GAC9G,OAAOvB,EAAGQ,KAAH,aAAsBjB,EAAM,CAC/BkC,QAAS,CAAC,eAAgB,wCAGlCC,OAZmB,WAcf,OADAR,QAAQC,IAAR,UACOnB,EAAGQ,KAAH,cAAuB,O,sGC1EtCV,EAAOC,QAAU,CAAC,WAAa,6B,mBCA/BD,EAAOC,QAAU,CAAC,OAAS,uBAAuB,KAAO,qBAAqB,OAAS,uBAAuB,KAAO,uB,mECWjG4B,QACW,cAA7BC,OAAOC,SAASC,UAEe,UAA7BF,OAAOC,SAASC,UAEhBF,OAAOC,SAASC,SAASC,MACvB,2D,+FCuBSC,MApCf,WACI,OACI,yBAAKC,UAAWC,IAAIC,QAChB,yBAAKF,UAAWC,IAAIE,MAChB,yBAAKH,UAAWC,IAAIG,MAChB,kBAAC,IAAD,CAAiBA,KAAM,CAAC,MAAO,WAEnC,kBAAC,IAAD,CAASC,GAAG,WAAWC,gBAAiBL,IAAIM,QAA5C,YAEJ,yBAAKP,UAAWC,IAAIE,MAChB,yBAAKH,UAAWC,IAAIG,MAChB,kBAAC,IAAD,CAAiBA,KAAM,CAAC,MAAO,eAEnC,kBAAC,IAAD,CAASC,GAAG,WAAWC,gBAAiBL,IAAIM,QAA5C,aAEJ,yBAAKP,UAAWC,IAAIE,MAChB,yBAAKH,UAAWC,IAAIG,MAChB,kBAAC,IAAD,CAAiBA,KAAM,CAAC,MAAO,mBAEnC,kBAAC,IAAD,CAASC,GAAG,SAASC,gBAAiBL,IAAIM,QAA1C,Y,mCCMDC,MAzBf,SAAgBC,GAKZ,OACI,yBAAKT,UAAU,gCACX,kBAAC,IAAD,CAASK,GAAI,IAAKL,UAAU,gBACxB,yBAAKU,IAAKC,IAAMC,IAAI,SADxB,kBAIA,6BAEQH,EAAMI,OACA,6BACE,2CAAiBJ,EAAMtB,MAAvB,KACA,uBAAG2B,KAAK,IAAId,UAAU,sBAAsBe,QAfvD,WACTN,EAAMhB,WAcc,YAEF,kBAAC,IAAD,CAASY,GAAI,UAAb,a,uDCnBpBW,EAAgBtG,6BAGhBC,EAAe,CACjB6B,OAAQ,KACRyE,MAAO,KACP9B,MAAO,KACP0B,QAAQ,EACRxE,YAAY,GAiBH6E,EAAkB,SAAC1E,EAAQ2C,EAAO0B,GAAhB,MAA4B,CAACzF,KAAM4F,EAAe1D,KAAM,CAACd,SAAQ2C,QAAO0B,YAK1FM,EAAkB,WAC3B,8CAAO,WAAOjE,GAAP,qBAAAC,EAAA,sEACgB4B,IAAQC,SADxB,OAIqB,KAHlB1B,EADH,QAIMM,YAAmB,EACFN,EAAKA,KAAtBd,EADkB,EAClBA,OAAQ2C,EADU,EACVA,MACbjC,EAASgE,EAAgB1E,EAAQ2C,GAAO,IACxCF,QAAQC,IAAR,iCAAsCC,KAEtCF,QAAQC,IAAR,kCATD,2CAAP,uDClBEkC,EAAqB,CACvB3B,ODwDkB,WAClB,8CAAO,WAAOvC,GAAP,SAAAC,EAAA,sEACG4B,IAAQU,SADX,OAEHR,QAAQC,IAAI,sBAEZhC,EAASgE,EAAgB,KAAM,KAAM,OAJlC,2CAAP,wDCtDWG,eAXS,SAACnG,GACrB,MAAO,CACH2F,OAAQ3F,EAAMoG,KAAKT,OACnB1B,MAAOjE,EAAMoG,KAAKnC,SAQciC,EAAzBC,EAfS,SAAAZ,GACpB,OAAO,kBAAC,EAAWA,M,6DCDjBc,EAAoBC,YAAO,IAC3BC,EAAoBD,YAAO,IA8BpBE,EAAYC,YAAU,CAACC,KAAM,SAAjBD,EA5BZ,SAAC,GAA2B,IAA1BE,EAAyB,EAAzBA,MAAOC,EAAkB,EAAlBA,aACZ1C,EAAW2C,YAAYC,IAAW,WAAY,WAAY,CAACC,IAAeV,IAC1ElC,EAAW0C,YAAYC,IAAW,WAAY,WAAY,CAACC,IAAeR,GAAoB,CAACrG,KAAM,aAI3G,OACI,0BAAM8G,SAAUJ,GACZ,kCACI,yCACC1C,EACAC,EAGGwC,GACA,yBAAK7B,UAAWC,IAAIkC,WACfN,GAGT,yBAAK7B,UAAU,cACX,4BAAQA,UAAU,mBAAlB,SACA,4BAAQA,UAAU,oBAAoBoC,UAAQ,GAA9C,kBCAdhB,EAAqB,CACvBjC,MHkBiB,SAACC,EAAUC,GAAkC,IAAxBC,EAAuB,wDAC7D,OAAO,SAACpC,GAEJ6B,IAAQI,MAAMC,EAAUC,EAAUC,GAC7BjB,MAAK,SAAAC,GAEFW,QAAQC,IAAI,qBAEZhC,EAASiE,QAMZkB,OAAM,SAACC,GAEJrD,QAAQC,IAAR,wBAA6BoD,EAAIhE,SAAShB,KAAKiF,YAE/CrF,EAASsF,YAAW,QAAS,CACzBC,OAAQH,EAAIhE,SAAShB,KAAKiF,mBGlC/BlB,eAVS,SAACnG,GACrB,MAAO,CACH2F,OAAQ3F,EAAMoG,KAAKT,UAQaO,EAAzBC,EA3BD,SAAC,GAAqB,IAApBR,EAAmB,EAAnBA,OAAQ1B,EAAW,EAAXA,MAMpB,OAAI0B,EACO,kBAAC,IAAD,CAAUR,GAAI,aAIrB,yBAAKL,UAAWC,IAAIhD,MAChB,kBAACyE,EAAD,CAAWQ,SAVF,SAACQ,GACdvD,EAAMuD,EAAOtD,SAAUsD,EAAOrD,iB,OCNhC1E,EAAe,CACjBgI,aAAa,G,sECLXhI,GAAe,G,oBCUjBiI,GAAWC,YAAgB,CAC3BC,IFHsB,WAAmC,IAAlC5H,EAAiC,uDAAzBP,EAAcQ,EAAW,uCACxD,OAAQA,EAAOC,MACX,IARgB,kBASZ,OAAO,eACAF,EADP,CAEIyH,aAAa,IAErB,QACI,OAAOzH,IEJf6H,mBACA9H,mBACAsB,kBACAyG,eDZ0B,WAAmC,IAAlC9H,EAAiC,uDAAzBP,GAAyB,iCAC5D,OAAOO,GCYPoG,KNDuB,WAAmC,IAAlCpG,EAAiC,uDAAzBP,EAAcQ,EAAW,uCACzD,OAAQA,EAAOC,MACX,KAAK4F,EACD,OAAO,eACA9F,EADP,GAEOC,EAAOmC,MAElB,QACI,OAAOpC,IMNf0G,KAAMqB,OAIJC,GAAmBvD,OAAOwD,sCAAwCC,IAE7DC,GAAQC,YAAYV,GAAUM,GACrCK,YAAgBC,QCrBPC,GAAe,SAACC,GAAwC,IAA7BC,EAA4B,uDAAjB,kBAAC,IAAD,MAC/C,OAAO,SAAClD,GAAD,OACH,kBAAC,WAAD,CAAUkD,SAAUA,GAChB,kBAACD,EAAcjD,MCUrBmD,GAAmBC,IAAMC,MAAK,kBAAM,iCACpCC,GAAmBF,IAAMC,MAAK,kBAAM,iCACpCE,GAAiBH,IAAMC,MAAK,kBAAM,iCAErBG,ICfPC,IACJC,IACAC,IACAC,K,IDcFC,G,kLAEEC,KAAK9D,MAAM+D,kB,+BAIX,OAAKD,KAAK9D,MAAMkC,YAIZ,yBAAK3C,UAAU,QACX,kBAAC,EAAD,MACA,kBAAC,EAAD,MACA,yBAAKA,UAAU,WACX,kBAAC,IAAD,CAAOyE,KAAK,mBAAmBC,OAAQjB,GAAaG,MACpD,kBAAC,IAAD,CAAOa,KAAK,UAAUC,OAAQjB,GAAaM,MAC3C,kBAAC,IAAD,CAAOU,KAAK,QAAQC,OAAQjB,GAAaO,MACzC,kBAAC,IAAD,CAAOS,KAAK,QAAQC,OAAQ,kBAAM,kBAAC,EAAD,WAVnC,kBAAC,IAAD,U,GAPDb,IAAMH,WA8BpBtC,GAAqB,CACrBoD,cJ3ByB,WACzB,OAAO,SAACtH,GACJ,IAAIyH,EAAWzH,EAASiE,KAExByD,QAAQC,IAAI,CAACF,IACRtG,MAAK,WACFnB,EAVwB,CAAC9B,KApBjB,0BIsDlB0J,GAAe1B,YACjB/B,aAXoB,SAACnG,GACrB,MAAO,CACHyH,YAAazH,EAAM4H,IAAIH,eASFvB,IACzB2D,IAFiB3B,CAGnBkB,IAEWU,GAAa,SAACvE,GACvB,OACI,kBAAC,IAAD,KACI,kBAAC,IAAD,CAAU4C,MAAOA,IACb,kBAACyB,GAAD,SE3DhBG,IAASP,OAED,kBAAC,GAAD,MAEHQ,SAASC,eAAe,SbyHvB,kBAAmBC,WACrBA,UAAUC,cAAcC,MACrBjH,MAAK,SAAAkH,GACJA,EAAaC,gBAEdnD,OAAM,SAAAR,GACL5C,QAAQ4C,MAAMA,EAAM7G,a,2LcrIfyK,EAAW,SAAC,GAKd,IAHHC,EAGE,EAHFA,MAGE,IAFFC,KAAOC,EAEL,EAFKA,QAAS/D,EAEd,EAFcA,MAAOgE,EAErB,EAFqBA,QACpBpF,EACD,gCAEAqF,EAAWF,GAAW/D,EAE5B,OACI,yBAAK7B,UAAWC,IAAI8F,aAAeD,EAAW,IAAM7F,IAAI4B,MAAQ,KAC5D,6BACI,4CAAU7B,UAAU,gBAAmB0F,EAAWjF,KAGlDmF,IACK/D,GAAS,8BAAOA,IAChBgE,GAAW,8BAAOA,MAO1B7D,EAAY,SAAC,GAKf,IAHH0D,EAGE,EAHFA,MAGE,IAFFC,KAAOC,EAEL,EAFKA,QAAS/D,EAEd,EAFcA,MAAOgE,EAErB,EAFqBA,QACpBpF,EACD,gCAEAqF,EAAWF,GAAW/D,EAE5B,OACI,yBAAK7B,UAAW,cAAgBC,IAAI8F,aAAeD,EAAW,IAAM7F,IAAI4B,MAAQ,KAC5E,6BACI,yCAAO7B,UAAU,gBAAmB0F,EAAWjF,KAG/CmF,IACK/D,GAAS,8BAAOA,IAChBgE,GAAW,8BAAOA,MAO1B9D,EAAc,SAACiE,EAAWlL,EAAMmL,EAAaC,GAAqC,IAA3BzF,EAA0B,uDAAlB,GAAIpF,EAAc,uDAAP,GACnF,OACI,yBAAK2E,UAAU,cACX,kBAAC,IAAD,eAAOgG,UAAWA,EAAWlL,KAAMA,EAAMmL,YAAaA,EAC/CC,SAAUA,GAAczF,IAFnC,IAE6CpF,K,gCCxDrD,oEAAO,IAAM4G,EAAgB,SAACkE,GAC1B,IAAIA,EAGJ,MAAO,qBAGE3E,EAAS,SAAC4E,GACnB,OAAO,SAACD,GACJ,KAAIA,EAAME,OAASD,GAGnB,MAAM,wBAAN,OAA+BA,M,mBCXvCvI,EAAOC,QAAU,CAAC,YAAc,8BAA8B,MAAQ,0B,gCCDtE,0FAIawI,EAAY,WACrB,OAAO,yBAAK5F,IAAK6F,IAASvG,UAAWC,IAAIsG,QAAS3F,IAAI,iB,6PCFpD4F,EAAW9L,2BACX+L,EAAc/L,8BACdgM,EAAmBhM,mCACnBiM,EAAkBjM,kCAElBC,EAAe,CACjBiM,MAAO,CACH,CAAC/L,GAAI,EAAGG,QAAS,SAAU6L,UAAW,GACtC,CAAChM,GAAI,EAAGG,QAAS,SAAU6L,UAAW,KAE1CC,QAAS,KACTjI,OAAQ,IAGCkE,EAAiB,WAAmC,IAAlC7H,EAAiC,uDAAzBP,EAAcQ,EAAW,uCAC5D,OAAQA,EAAOC,MACX,KAAKoL,EACD,IAAIjI,EAAO,CAAC1D,GAAI,EAAGG,QAASG,EAAOE,KAAMwL,UAAW,GACpD,OAAO,eACA3L,EADP,CAEI0L,MAAM,GAAD,mBAAM1L,EAAM0L,OAAZ,CAAmBrI,MAGhC,KAAKkI,EACD,OAAO,eACAvL,EADP,CAEI0L,MAAO1L,EAAM0L,MAAMhK,QAAO,SAAA2B,GAAI,OAAIA,EAAK1D,KAAOM,EAAO4L,YAG7D,KAAKL,EACD,OAAO,eACAxL,EADP,CAEI4L,QAAS3L,EAAO2L,UAGxB,KAAKH,EACD,OAAO,eACAzL,EADP,CAEI2D,OAAQ1D,EAAO0D,SAGvB,QACI,OAAO3D,IAMN8L,EAAU,SAAC3L,GAAD,MAAW,CAACD,KAAMoL,EAAUnL,SAG7C4L,EAAgB,SAACpI,GAAD,MAAa,CAACzD,KAAMuL,EAAiB9H,WAI9CqI,EAAiB,SAAC1K,GAC3B,8CAAO,WAAOU,GAAP,eAAAC,EAAA,sEACgBsB,IAAWC,WAAWlC,GADtC,OACGc,EADH,OAEHJ,EAR6B,CAAC9B,KAAMsL,EAAkBI,QAQ9BxJ,IAFrB,2CAAP,uDAMS6J,EAAgB,SAAC3K,GAC1B,8CAAO,WAAOU,GAAP,eAAAC,EAAA,sEACgBsB,IAAWE,UAAUnC,GADrC,OACGc,EADH,OAEHJ,EAAS+J,EAAc3J,IAFpB,2CAAP,uDAMS8J,EAAmB,SAACvI,GAC7B,8CAAO,WAAO3B,GAAP,SAAAC,EAAA,sEACgBsB,IAAWG,aAAaC,GADxC,OAEqB,IAFrB,OAEMjB,YACLV,EAAS+J,EAAcpI,IAHxB,2CAAP,yD","file":"static/js/main.69b48678.chunk.js","sourcesContent":["const ACTION_PREFIX = \"gentree/dialogs/\"\r\nconst SEND_MESSAGE = ACTION_PREFIX + 'SEND-MESSAGE';\r\n\r\nconst initialState = {\r\n    dialogs: [\r\n        {id: 1, name: 'Petr'},\r\n        {id: 2, name: 'Ivan'},\r\n        {id: 3, name: 'Andrey'},\r\n        {id: 4, name: 'Oleg'}\r\n    ],\r\n    messages: [\r\n        {id: 1, message: 'Hi'},\r\n        {id: 2, message: 'How are you?'},\r\n        {id: 3, message: 'Yo'},\r\n        {id: 4, message: 'message 4'},\r\n        {id: 5, message: 'Yo'}\r\n    ],\r\n}\r\n\r\nexport const dialogsReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case SEND_MESSAGE:\r\n            let message = {id: 6, message: action.text};\r\n            return {\r\n                ...state,\r\n                messages: [...state.messages, message],\r\n            };\r\n\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport const sendMessage = (text) => ({type: SEND_MESSAGE, text})\r\n","/**\r\n * Возвращает новый массив, полученный из переданного путем замены в нем объекта,\r\n * найденного по itemId его копией со свойством propName,\r\n * установленным в propValue.\r\n *\r\n * @param {[]} array\r\n * @param {*} itemId\r\n * @param {string} propName\r\n * @param {*} propValue\r\n */\r\nexport let updateItemPropertyInArray = (array, itemId, propName, propValue) => {\r\n    return array.map(obj => {\r\n        if (obj.id !== itemId) {\r\n            return obj;\r\n        }\r\n        return {\r\n            ...obj,\r\n            [propName]: propValue\r\n        };\r\n    })\r\n}\r\n\r\nexport let updateObjectInArray = (array, propertyName, itemProperty, updateObject) => {\r\n    return array.map(obj => {\r\n        if (obj[propertyName] !== itemProperty) {\r\n            return obj;\r\n        }\r\n        return {\r\n            ...obj,\r\n            ...updateObject\r\n        };\r\n    })\r\n}","import {userAPI} from \"../api/api\";\r\nimport {updateItemPropertyInArray} from \"../util/objectHelper\";\r\n\r\nconst ACTION_PREFIX = \"gentree/users/\"\r\nconst SET_USERS = ACTION_PREFIX + 'SET_USERS';\r\nconst ADD_USERS = ACTION_PREFIX + 'ADD_USERS';\r\nconst TOGGLE_FOLLOW = ACTION_PREFIX + 'TOGGLE_FOLLOW';\r\nconst SET_CURRENT_PAGE = ACTION_PREFIX + 'SET_CURRENT_PAGE';\r\nconst SET_TOTAL_USERS_COUNT = ACTION_PREFIX + 'SET_TOTAL_USERS_COUNT';\r\nconst SET_IS_FETCHING = ACTION_PREFIX + 'SET_IS_FETCHING';\r\nconst TOGGLE_FOLLOWING_IN_PROGRESS = ACTION_PREFIX + 'TOGGLE_FOLLOWING_IN_PROGRESS';\r\n\r\nconst initialState = {\r\n    users: [],\r\n    pageSize: 5,\r\n    totalUsersCount: 0,\r\n    currentPage: 1,\r\n    isFetching: false,\r\n    followingInProgress: [],\r\n}\r\n\r\nexport const usersReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case SET_USERS:\r\n            return {\r\n                ...state,\r\n                users: [...action.users]\r\n            }\r\n        case ADD_USERS:\r\n            return {\r\n                ...state,\r\n                users: [...state.users, ...action.users]\r\n            }\r\n        case TOGGLE_FOLLOW:\r\n            return {\r\n                ...state,\r\n                users: updateItemPropertyInArray(state.users, action.userId, 'followed', action.followed)\r\n            }\r\n        case SET_CURRENT_PAGE:\r\n            return {\r\n                ...state,\r\n                currentPage: action.currentPage\r\n            }\r\n        case SET_TOTAL_USERS_COUNT:\r\n            return {\r\n                ...state,\r\n                totalUsersCount: action.usersCount\r\n            }\r\n        case SET_IS_FETCHING:\r\n            return {\r\n                ...state,\r\n                isFetching: action.isFetching\r\n            }\r\n        case TOGGLE_FOLLOWING_IN_PROGRESS:\r\n            return {\r\n                ...state,\r\n                followingInProgress: action.inProgress\r\n                    ? [...state.followingInProgress, action.userId]\r\n                    : state.followingInProgress.filter(id => action.userId !== id)\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\n// -- Action creators --\r\n\r\nexport const setUsers = (users) => ({type: SET_USERS, users})\r\nexport const addUsers = (users) => ({type: ADD_USERS, users})\r\nexport const toggleFollowSuccess = (userId, followed) => ({type: TOGGLE_FOLLOW, userId, followed})\r\nexport const setCurrentPage = (currentPage) => ({type: SET_CURRENT_PAGE, currentPage})\r\nexport const setTotalUsersCount = (usersCount) => ({type: SET_TOTAL_USERS_COUNT, usersCount})\r\nexport const setIsFetching = (isFetching) => ({type: SET_IS_FETCHING, isFetching})\r\nexport const toggleFollowingInProgress = (inProgress, userId) => ({\r\n    type: TOGGLE_FOLLOWING_IN_PROGRESS,\r\n    inProgress,\r\n    userId\r\n})\r\n\r\n// -- Thunk creators --\r\n\r\nexport const fetchUsers = (page, pageSize) => {\r\n    return async (dispatch) => {\r\n        dispatch(setIsFetching(true));\r\n        const data = await userAPI.getUsers(page, pageSize);\r\n        dispatch(setCurrentPage(page));\r\n        dispatch(setIsFetching(false));\r\n        dispatch(setUsers(data.items));\r\n        dispatch(setTotalUsersCount(data.totalCount));\r\n    };\r\n}\r\n\r\nexport const toggleFollow = (userId, follow) => {\r\n    return async (dispatch) => {\r\n        dispatch(toggleFollowingInProgress(true, userId));\r\n        const data = follow\r\n            ? await userAPI.follow(userId)\r\n            : await userAPI.unfollow(userId);\r\n        if (data.resultCode === 0) {\r\n            dispatch(toggleFollowSuccess(userId, follow));\r\n        }\r\n        dispatch(toggleFollowingInProgress(false, userId));\r\n    }\r\n}\r\n","module.exports = \"data:image/jpeg;base64,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\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"page\":\"Login_page__3RsHG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"formError\":\"LoginForm_formError__1Inu9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"spinner\":\"Preloader_spinner__AcFmB\"};","module.exports = __webpack_public_path__ + \"static/media/spinner.11297884.svg\";","import axios from \"axios\";\r\n\r\nconst API_URL = \"http://localhost:8080/\";\r\n\r\n// TODO Рефакторинг:\r\n//   - вынести работу с ax в отдельный файл (и добавить обработку ошибок)\r\n//   - вынести куски разных api в отдельные файлы\r\n\r\nconst ax = axios.create({\r\n    baseURL: API_URL,\r\n    withCredentials: true,\r\n})\r\n\r\nconst subscribeToAPIResponse = (callback, responseFunc) => {\r\n    ax.interceptors.response.use(response => {\r\n        if (responseFunc(response)) {\r\n            callback(response);\r\n        }\r\n        return response;\r\n    })\r\n}\r\n\r\n// noinspection JSUnusedGlobalSymbols\r\nexport const subscribeToResponseError = (callback, errorCode) => {\r\n    subscribeToAPIResponse(callback, (response) => response.status === errorCode);\r\n}\r\n\r\nexport const userAPI = {\r\n    getUsers(currentPage = 1, pageSize = 10) {\r\n        return ax.get(`users?page=${currentPage}&count=${pageSize}`)\r\n            .then(response => response.data)\r\n    },\r\n\r\n    follow(userId) {\r\n        return ax.post(`follow/${userId}`)\r\n            .then(response => response.data)\r\n    },\r\n\r\n    unfollow(userId) {\r\n        return ax.delete(`follow/${userId}`)\r\n            .then(response => response.data)\r\n    },\r\n}\r\n\r\nexport const profileAPI = {\r\n    getProfile(userId) {\r\n        return ax.get(`profile/${userId}`)\r\n            .then(response => response.data)\r\n    },\r\n    getStatus(userId) {\r\n        return ax.get(`profile/status/${userId}`)\r\n            .then(response => response.data)\r\n    },\r\n    updateStatus(status) {\r\n        return ax.put(`profile/status`, {\r\n            status\r\n        })\r\n            .then(response => response.data)\r\n    },\r\n}\r\n\r\nexport const authAPI = {\r\n    authMe() {\r\n        console.log(`get to /auth/me`)\r\n        return ax.get(`auth/me`)\r\n            .then(response => response.data)\r\n    },\r\n    login(username, password, rememberMe = false) {\r\n        const data = `username=${encodeURIComponent(username)}&password=${encodeURIComponent(password)}&remember-me=${rememberMe}`;\r\n        return ax.post(`auth/login`, data, {\r\n            headers: {'Content-Type': 'application/x-www-form-urlencoded'}\r\n        })\r\n    },\r\n    logout() {\r\n        console.log(`logout`)\r\n        return ax.post(`auth/logout`, {})\r\n    },\r\n}\r\n\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loginBlock\":\"Header_loginBlock__1Uc4_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"navbar\":\"Navbar_navbar__37JjP\",\"item\":\"Navbar_item__1h9vn\",\"active\":\"Navbar_active__Z4w-l\",\"icon\":\"Navbar_icon__3UyGO\"};","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\r\nimport css from './Navbar.module.css'\r\nimport {NavLink} from \"react-router-dom\";\r\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\r\n\r\nfunction Navbar() {\r\n    return (\r\n        <nav className={css.navbar}>\r\n            <div className={css.item}>\r\n                <div className={css.icon}>\r\n                    <FontAwesomeIcon icon={['far', \"user\"]}/>\r\n                </div>\r\n                <NavLink to=\"/profile\" activeClassName={css.active}>Profile</NavLink>\r\n            </div>\r\n            <div className={css.item}>\r\n                <div className={css.icon}>\r\n                    <FontAwesomeIcon icon={['far', \"comments\"]}/>\r\n                </div>\r\n                <NavLink to=\"/dialogs\" activeClassName={css.active}>Messages</NavLink>\r\n            </div>\r\n            <div className={css.item}>\r\n                <div className={css.icon}>\r\n                    <FontAwesomeIcon icon={['far', \"address-book\"]}/>\r\n                </div>\r\n                <NavLink to=\"/users\" activeClassName={css.active}>Users</NavLink>\r\n            </div>\r\n            {/*\r\n            <div className={css.item}>\r\n                <a>News</a>\r\n            </div>\r\n            <div className={css.item}>\r\n                <a>Music</a>\r\n            </div>\r\n            <div className={css.item}>\r\n                <a>Settings</a>\r\n            </div>\r\n            */}\r\n        </nav>\r\n    );\r\n}\r\n\r\nexport default Navbar;","import React from \"react\";\r\nimport css from './Header.module.css'\r\nimport {NavLink} from \"react-router-dom\";\r\nimport logo from './../../assets/images/logo.jpg'\r\n\r\nfunction Header(props) {\r\n    let logout = () => {\r\n        props.logout();\r\n    }\r\n\r\n    return (\r\n        <nav className=\"navbar navbar-light bg-light\">\r\n            <NavLink to={'/'} className=\"navbar-brand\">\r\n                <img src={logo} alt='logo'/>\r\n                GenTreeNetwork\r\n            </NavLink>\r\n            <div>\r\n                {\r\n                    props.isAuth\r\n                        ? <div>\r\n                            <span>Username: {props.login} </span>\r\n                            <a href=\"#\" className=\"badge badge-warning\" onClick={logout}>Log out</a>\r\n                        </div>\r\n                        : <NavLink to={'/login'}>Log in</NavLink>\r\n                }\r\n            </div>\r\n        </nav>\r\n    );\r\n}\r\n\r\nexport default Header;","import {authAPI} from \"../api/api\";\r\nimport {stopSubmit} from \"redux-form\";\r\n\r\nconst ACTION_PREFIX = \"gentree/auth/\"\r\nconst SET_USER_DATA = ACTION_PREFIX + 'SET_USER_DATA';\r\nconst SET_IS_FETCHING = ACTION_PREFIX + 'SET_IS_FETCHING';\r\n\r\nconst initialState = {\r\n    userId: null,\r\n    email: null,\r\n    login: null,\r\n    isAuth: false,\r\n    isFetching: false,\r\n}\r\n\r\nexport const authReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case SET_USER_DATA:\r\n            return {\r\n                ...state,\r\n                ...action.data,\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\n// -- Action creators --\r\n\r\nexport const setAuthUserData = (userId, login, isAuth) => ({type: SET_USER_DATA, data: {userId, login, isAuth}})\r\nexport const setIsFetching = (isFetching) => ({type: SET_IS_FETCHING, isFetching})\r\n\r\n// -- Thunk creators --\r\n\r\nexport const getAuthUserData = () => {\r\n    return async (dispatch) => {\r\n        const data = await authAPI.authMe();\r\n        // resultCode: 0 -> authorized, 1 -> not authorized\r\n        // TODO Должно возвращаться 200 или 401\r\n        if (data.resultCode === 0) {\r\n            let {userId, login} = data.data;\r\n            dispatch(setAuthUserData(userId, login, true))\r\n            console.log(`getAuthUserData login: ${login}`)\r\n        } else {\r\n            console.log(`getAuthUserData login: no auth`)\r\n        }\r\n    }\r\n}\r\n\r\nexport const login = (username, password, rememberMe = false) => {\r\n    return (dispatch) => {\r\n        // TODO Как переписать на async/await с обработкой ошибок?\r\n        authAPI.login(username, password, rememberMe)\r\n            .then(response => {\r\n                // TODO Проверяем, что пришло 200 OK\r\n                console.log('successful login!');\r\n                // Идем за данными залогиненного юзера\r\n                dispatch(getAuthUserData());\r\n                // TODO когда запрос на логин будет возвращать данные юзера,\r\n                //  можно будет сразу кидать их в store вот так:\r\n                //  let {id, email, login} = response.data.data;\r\n                //  dispatch(setAuthUserData(id, email, login));\r\n            })\r\n            .catch((err) => {\r\n                // Выводим ошибку в консоль\r\n                console.log(`Login failed! ${err.response.data.exception}`);\r\n                // Кидаем ошибку в redux-form\r\n                dispatch(stopSubmit('login', {\r\n                    _error: err.response.data.exception\r\n                }));\r\n            })\r\n    }\r\n}\r\n\r\nexport const logout = () => {\r\n    return async (dispatch) => {\r\n        await authAPI.logout();\r\n        console.log('successful logout!');\r\n        // Очищаем данные юзера в store\r\n        dispatch(setAuthUserData(null, null, null, false))\r\n    }\r\n}\r\n","import React from \"react\";\r\n\r\nimport Header from \"./Header\";\r\nimport {connect} from \"react-redux\";\r\nimport {logout} from \"../../redux/authReducer\";\r\n\r\nconst HeaderContainer = props => {\r\n    return <Header {...props}/>;\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        isAuth: state.auth.isAuth,\r\n        login: state.auth.login,\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n    logout,\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(HeaderContainer);","import React from \"react\";\r\nimport {reduxForm} from \"redux-form\";\r\nimport {createField, TextInput} from \"../../shared/form-controls/Controls\";\r\nimport {maxLen, requiredField} from \"../../../util/validators/validators\";\r\nimport css from './LoginForm.module.css';\r\n\r\nconst maxLengthUsername = maxLen(10);\r\nconst maxLengthPassword = maxLen(16);\r\n\r\nconst Form = ({error, handleSubmit}) => {\r\n    const username = createField(TextInput, 'username', 'Username', [requiredField, maxLengthUsername]);\r\n    const password = createField(TextInput, 'password', 'Password', [requiredField, maxLengthPassword], {type: 'password'});\r\n    // TODO прикрутить rememberMe на сервере и проверить работу\r\n    // const rememberMe = createField('input', 'rememberMe', null, null, {type: 'checkbox'}, 'remember me');\r\n\r\n    return (\r\n        <form onSubmit={handleSubmit}>\r\n            <fieldset>\r\n                <legend>Login</legend>\r\n                {username}\r\n                {password}\r\n                {/*{rememberMe}*/}\r\n                {\r\n                    error &&\r\n                    <div className={css.formError}>\r\n                        {error}\r\n                    </div>\r\n                }\r\n                <div className=\"form-group\">\r\n                    <button className=\"btn btn-success\">Login</button>\r\n                    <button className=\"btn btn-secondary\" disabled>Register</button>\r\n                </div>\r\n            </fieldset>\r\n        </form>\r\n    )\r\n}\r\n\r\nexport const LoginForm = reduxForm({form: 'login'})(Form)","import React from \"react\";\r\nimport css from \"./Login.module.css\";\r\nimport {LoginForm} from \"./loginForm/LoginForm\";\r\nimport {login} from \"../../redux/authReducer\";\r\nimport {connect} from \"react-redux\";\r\nimport {Redirect} from \"react-router\";\r\n\r\nconst Login = ({isAuth, login}) => {\r\n\r\n    const onSubmit = (values) => {\r\n        login(values.username, values.password)\r\n    }\r\n\r\n    if (isAuth) {\r\n        return <Redirect to={'/profile'}/>\r\n    }\r\n\r\n    return (\r\n        <div className={css.page}>\r\n            <LoginForm onSubmit={onSubmit}/>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        isAuth: state.auth.isAuth,\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n    login,\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Login);","import {getAuthUserData} from \"./authReducer\";\r\n\r\nconst SET_INITIALIZED = 'SET_INITIALIZED';\r\n\r\nconst initialState = {\r\n    initialized: false,\r\n}\r\n\r\nexport const appReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case SET_INITIALIZED:\r\n            return {\r\n                ...state,\r\n                initialized: true,\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\n// -- Action creators --\r\n\r\nexport const initializeSuccess = () => ({type: SET_INITIALIZED})\r\n\r\n// -- Thunk creators --\r\n\r\nexport const initializeApp = () => {\r\n    return (dispatch) => {\r\n        let userData = dispatch(getAuthUserData());\r\n\r\n        Promise.all([userData])\r\n            .then(() => {\r\n                dispatch(initializeSuccess());\r\n            })\r\n    }\r\n}\r\n","const initialState = {\r\n}\r\n\r\nexport const sidebarReducer = (state = initialState, action) => {\r\n    return state;\r\n}","import {applyMiddleware, combineReducers, compose, createStore} from \"redux\";\r\nimport {profileReducer} from \"./profileReducer\";\r\nimport {dialogsReducer} from \"./dialogsReducer\";\r\nimport {usersReducer} from \"./usersReducer\";\r\nimport {sidebarReducer} from \"./sidebarReducer\";\r\nimport {authReducer} from \"./authReducer\";\r\nimport thunk from \"redux-thunk\";\r\nimport {reducer as formReducer} from \"redux-form\"\r\nimport {appReducer} from \"./appReducer\";\r\n\r\nlet reducers = combineReducers({\r\n    app: appReducer,\r\n    profileReducer,\r\n    dialogsReducer,\r\n    usersReducer,\r\n    sidebarReducer,\r\n    auth: authReducer,\r\n    form: formReducer,\r\n});\r\n\r\n// NOTE Для работы расширения Redux DevTools\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nexport let store = createStore(reducers, composeEnhancers(\r\n    applyMiddleware(thunk)\r\n));\r\n","import React, {Suspense} from \"react\";\r\nimport {Preloader} from \"../components/shared/preloader/preloader\";\r\n\r\nexport const withSuspense = (Component, fallback = <Preloader/>) => {\r\n    return (props) => (\r\n        <Suspense fallback={fallback}>\r\n            <Component {...props}/>\r\n        </Suspense>\r\n    );\r\n}\r\n","import React, {Suspense} from 'react';\nimport './App.css';\nimport Navbar from \"./components/navbar/Navbar\";\nimport {Route, withRouter} from \"react-router\";\nimport HeaderContainer from \"./components/header/HeaderContainer\";\nimport Login from \"./components/login/Login\";\nimport {connect, Provider} from \"react-redux\";\nimport {compose} from \"redux\";\nimport {initializeApp} from \"./redux/appReducer\";\nimport {Preloader} from \"./components/shared/preloader/preloader\";\nimport {prepareIconLibrary} from \"./util/iconUtils\";\nimport {library} from \"@fortawesome/fontawesome-svg-core\";\nimport {store} from \"./redux/store\";\nimport {BrowserRouter} from \"react-router-dom\";\nimport {withSuspense} from \"./hoc/withSuspense\";\n\nconst ProfileContainer = React.lazy(() => import('./components/profile/ProfileContainer'));\nconst DialogsContainer = React.lazy(() => import('./components/dialogs/DialogsContainer'));\nconst UsersContainer = React.lazy(() => import('./components/users/UsersContainer'));\n\nprepareIconLibrary(library);\n\nclass App extends React.Component {\n    componentDidMount() {\n        this.props.initializeApp();\n    }\n\n    render() {\n        if (!this.props.initialized)\n            return <Preloader/>\n\n        return (\n            <div className='grid'>\n                <HeaderContainer/>\n                <Navbar/>\n                <div className='content'>\n                    <Route path='profile/:userId?' render={withSuspense(ProfileContainer)}/>\n                    <Route path='dialogs' render={withSuspense(DialogsContainer)}/>\n                    <Route path='users' render={withSuspense(UsersContainer)}/>\n                    <Route path='login' render={() => <Login/>}/>\n                </div>\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        initialized: state.app.initialized,\n    }\n}\n\nlet mapDispatchToProps = {\n    initializeApp,\n}\n\nconst AppContainer = compose(\n    connect(mapStateToProps, mapDispatchToProps),\n    withRouter,\n)(App);\n\nexport const GenTreeApp = (props) => {\n    return (\n        <BrowserRouter>\n            <Provider store={store}>\n                <AppContainer/>\n            </Provider>\n        </BrowserRouter>\n    )\n}\n\n","import {fab} from \"@fortawesome/free-brands-svg-icons\";\r\nimport {fas} from \"@fortawesome/free-solid-svg-icons\";\r\nimport {far} from \"@fortawesome/free-regular-svg-icons\";\r\n\r\nexport const prepareIconLibrary = (library) => {\r\n    library.add(\r\n        fab,\r\n        fas,\r\n        far,\r\n    )\r\n}\r\n","import React from 'react';\nimport './index.css';\nimport * as serviceWorker from './serviceWorker';\nimport ReactDOM from \"react-dom\";\nimport {GenTreeApp} from \"./App\";\n\nReactDOM.render(\n    // <React.StrictMode>\n        <GenTreeApp/>\n    // </React.StrictMode>\n   , document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import React from \"react\";\r\nimport css from \"./Controls.module.css\"\r\nimport {Field} from \"redux-form\";\r\n\r\nexport const TextArea = (\r\n    {\r\n        input,\r\n        meta: {touched, error, warning},\r\n        ...props\r\n    }) => {\r\n\r\n    const hasError = touched && error;\r\n\r\n    return (\r\n        <div className={css.formControl + (hasError ? \" \" + css.error : \"\")}>\r\n            <div>\r\n                <textarea className=\"form-control\" {...input} {...props}/>\r\n            </div>\r\n            {\r\n                touched && (\r\n                    (error && <span>{error}</span>) ||\r\n                    (warning && <span>{warning}</span>)\r\n                )\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport const TextInput = (\r\n    {\r\n        input,\r\n        meta: {touched, error, warning},\r\n        ...props\r\n    }) => {\r\n\r\n    const hasError = touched && error;\r\n\r\n    return (\r\n        <div className={\"form-group \" + css.formControl + (hasError ? \" \" + css.error : \"\")}>\r\n            <div>\r\n                <input className=\"form-control\" {...input} {...props}/>\r\n            </div>\r\n            {\r\n                touched && (\r\n                    (error && <span>{error}</span>) ||\r\n                    (warning && <span>{warning}</span>)\r\n                )\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport const createField = (component, name, placeholder, validate, props = {}, text = '') => {\r\n    return (\r\n        <div className=\"form-group\">\r\n            <Field component={component} name={name} placeholder={placeholder}\r\n                   validate={validate} {...props}/> {text}\r\n        </div>\r\n    )\r\n}\r\n","export const requiredField = (value) => {\r\n    if (value)\r\n        return undefined;\r\n\r\n    return 'field is required';\r\n}\r\n\r\nexport const maxLen = (max) => {\r\n    return (value) => {\r\n        if (value.length < max)\r\n            return undefined;\r\n\r\n        return `max length of field: ${max}`;\r\n    };\r\n}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"formControl\":\"Controls_formControl__2e43W\",\"error\":\"Controls_error__2nBzv\"};","import React from \"react\";\r\nimport css from \"./Preloader.module.css\";\r\nimport spinner from \"../../../assets/images/spinner.svg\";\r\n\r\nexport const Preloader = () => {\r\n    return <img src={spinner} className={css.spinner} alt='loading...'/>\r\n}","import {profileAPI} from \"../api/api\";\r\n\r\nconst ACTION_PREFIX = \"gentree/profile/\"\r\nconst ADD_POST = ACTION_PREFIX + 'ADD_POST';\r\nconst DELETE_POST = ACTION_PREFIX + 'DELETE_POST';\r\nconst SET_USER_PROFILE = ACTION_PREFIX + 'SET_USER_PROFILE';\r\nconst SET_USER_STATUS = ACTION_PREFIX + 'SET_USER_STATUS';\r\n\r\nconst initialState = {\r\n    posts: [\r\n        {id: 1, message: 'text 1', likeCount: 5},\r\n        {id: 2, message: 'text 2', likeCount: 25}\r\n    ],\r\n    profile: null,\r\n    status: '',\r\n}\r\n\r\nexport const profileReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case ADD_POST:\r\n            let post = {id: 4, message: action.text, likeCount: 0};\r\n            return {\r\n                ...state,\r\n                posts: [...state.posts, post],\r\n            };\r\n\r\n        case DELETE_POST:\r\n            return {\r\n                ...state,\r\n                posts: state.posts.filter(post => post.id !== action.postId)\r\n            };\r\n\r\n        case SET_USER_PROFILE:\r\n            return {\r\n                ...state,\r\n                profile: action.profile\r\n            }\r\n\r\n        case SET_USER_STATUS:\r\n            return {\r\n                ...state,\r\n                status: action.status,\r\n            }\r\n\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\n// -- Action creators --\r\n\r\nexport const addPost = (text) => ({type: ADD_POST, text})\r\nexport const deletePost = (postId) => ({type: DELETE_POST, postId})\r\nconst setUserProfile = (profile) => ({type: SET_USER_PROFILE, profile})\r\nconst setUserStatus = (status) => ({type: SET_USER_STATUS, status})\r\n\r\n// -- Thunk creators --\r\n\r\nexport const getUserProfile = (userId) => {\r\n    return async (dispatch) => {\r\n        const data = await profileAPI.getProfile(userId);\r\n        dispatch(setUserProfile(data));\r\n    }\r\n}\r\n\r\nexport const getUserStatus = (userId) => {\r\n    return async (dispatch) => {\r\n        const data = await profileAPI.getStatus(userId);\r\n        dispatch(setUserStatus(data))\r\n    }\r\n}\r\n\r\nexport const updateUserStatus = (status) => {\r\n    return async (dispatch) => {\r\n        const data = await profileAPI.updateStatus(status);\r\n        if (data.resultCode === 0) {\r\n            dispatch(setUserStatus(status));\r\n        }\r\n    }\r\n}\r\n"],"sourceRoot":""}